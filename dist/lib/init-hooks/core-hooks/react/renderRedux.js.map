{"version":3,"sources":["../../../../../src/lib/init-hooks/core-hooks/react/renderRedux.js"],"names":["path","require","paths","config","Layout","module","exports","renderRedux","options","layout","clientConfig","headScripts","res","req","context","appInitPath","app_dir","reactPaths","clientRoot","reactRoot","get","getAppComponents","normalize","default","Container","getStyleSheets","store","Router","props","url","children","send","ReactDOMServer","renderToStaticMarkup","locals","getState"],"mappings":";;AACA;;AACA;;AACA;;;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAArB;;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,eAAD,CAAtB;;AACA,MAAMG,MAAM,GAAGH,OAAO,CAAC,UAAD,CAAtB;;AAGAI,MAAM,CAACC,OAAP,GAAiB,SAASC,WAAT,CAAqBC,OAAO,GAAG;AAAEC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,YAAY,EAAE,EAAhB;AAAoBC,IAAAA,WAAW,EAAE;AAAjC;AAAV,CAA/B,EAAgF;AAE/F,QAAMC,GAAG,GAAG,IAAZ;AACA,QAAMC,GAAG,GAAGD,GAAG,CAACC,GAAhB;AAEA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,WAAW,GAAGb,KAAK,CAACc,OAAN,GAChBJ,GAAG,CAACK,UAAJ,CAAeC,UADC,GAEhB,GAFgB,GAGhBN,GAAG,CAACK,UAAJ,CAAeE,SAHC,GAIhBhB,MAAM,CAACiB,GAAP,CAAW,8BAAX,EAA2C,aAA3C,CAJJ;;AAMA,QAAMC,gBAAgB,GAAGpB,OAAO,CAACD,IAAI,CAACsB,SAAL,CAAeP,WAAf,CAAD,CAAP,CAAqCQ,OAA9D;;AACA,QAAO;AAAEC,IAAAA,SAAF;AAAaC,IAAAA,cAAb;AAA6BC,IAAAA;AAA7B,MAAwCL,gBAAgB,CAAC;AAACM,IAAAA,MAAM,EAAGC,KAAD,IAAW;AAClF,aACE,6BAAC,4BAAD;AAAc,QAAA,QAAQ,EAAEf,GAAG,CAACgB,GAA5B;AAAiC,QAAA,OAAO,EAAEf,OAA1C;AAAmD,QAAA,KAAK,EAAEc;AAA1D,SACGA,KAAK,CAACE,QADT,CADF;AAKD;AAN+D,GAAD,CAA/D;AAQAlB,EAAAA,GAAG,CAACmB,IAAJ,CAAS,oBAAoBC,gBAAeC,oBAAf,CAC3B,6BAAC,MAAD;AACE,IAAA,cAAc,EAAER,cADlB;AAEE,IAAA,MAAM,EAAEb,GAAG,CAACsB,MAFd;AAGE,IAAA,aAAa,EAAE1B,OAAO,CAACC,MAAR,CAAeC,YAHhC;AAIE,IAAA,WAAW,EAAEF,OAAO,CAACC,MAAR,CAAeE,WAJ9B;AAKE,IAAA,WAAW,EAAEe,KAAK,CAACS,QAAN;AALf,KAME,6BAAC,SAAD,OANF,CAD2B,CAA7B;AAUD,CA/BD","sourcesContent":["\nimport React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport { StaticRouter } from 'react-router-dom';\n\nconst path = require('path');\nconst paths = require('paths');\nconst config = require('boring-config');\nconst Layout = require('./Layout');\n\n\nmodule.exports = function renderRedux(options = { layout: { clientConfig: {}, headScripts: []}}) {\n\n  const res = this;\n  const req = res.req;\n\n  const context = {};\n  const appInitPath = paths.app_dir\n    + res.reactPaths.clientRoot\n    + '/'\n    + res.reactPaths.reactRoot\n    + config.get('boring.react.reduxComponents', '/AppInit.js')\n\n  const getAppComponents = require(path.normalize(appInitPath)).default;\n  const  { Container, getStyleSheets, store }  = getAppComponents({Router: (props) => {\n    return (\n      <StaticRouter location={req.url} context={context} props={props}>\n        {props.children}\n      </StaticRouter>\n    )\n  }});\n\n  res.send('<!DOCTYPE html>' + ReactDOMServer.renderToStaticMarkup(\n    <Layout\n      getStyleSheets={getStyleSheets}\n      locals={res.locals}\n      client_config={options.layout.clientConfig}\n      headScripts={options.layout.headScripts}\n      redux_state={store.getState()}>\n      <Container />\n    </Layout>\n  ))\n}"],"file":"renderRedux.js"}