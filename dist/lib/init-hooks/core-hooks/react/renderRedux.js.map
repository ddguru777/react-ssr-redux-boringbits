{"version":3,"sources":["../../../../../src/lib/init-hooks/core-hooks/react/renderRedux.js"],"names":["path","require","paths","config","Layout","module","exports","renderRedux","options","layout","clientConfig","headScripts","res","req","context","App","app_dir","reactPaths","clientRoot","reactRoot","get","default","rootReducer","Router","props","url","children","dependencies","getAppComponents","Container","getStyleSheets","store","send","ReactDOMServer","renderToStaticMarkup","locals","getState"],"mappings":";;AACA;;AACA;;AACA;;;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMC,KAAK,GAAGD,OAAO,CAAC,OAAD,CAArB;;AACA,MAAME,MAAM,GAAGF,OAAO,CAAC,eAAD,CAAtB;;AACA,MAAMG,MAAM,GAAGH,OAAO,CAAC,UAAD,CAAtB;;AAGAI,MAAM,CAACC,OAAP,GAAiB,SAASC,WAAT,CAAqBC,OAAO,GAAG;AAAEC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,YAAY,EAAE,EAAhB;AAAoBC,IAAAA,WAAW,EAAE;AAAjC;AAAV,CAA/B,EAAgF;AAE/F,QAAMC,GAAG,GAAG,IAAZ;AACA,QAAMC,GAAG,GAAGD,GAAG,CAACC,GAAhB;AAEA,QAAMC,OAAO,GAAG,EAAhB;;AAEA,QAAMC,GAAG,GAAGd,OAAO,CAACC,KAAK,CAACc,OAAN,GAChBJ,GAAG,CAACK,UAAJ,CAAeC,UADC,GAEhB,GAFgB,GAGhBN,GAAG,CAACK,UAAJ,CAAeE,SAHC,GAIhBhB,MAAM,CAACiB,GAAP,CAAW,sBAAX,EAAmC,SAAnC,CAJe,CAAP,CAIuCC,OAJnD;;AAMA,QAAMC,WAAW,GAAGrB,OAAO,CAACC,KAAK,CAACc,OAAN,GACxBJ,GAAG,CAACK,UAAJ,CAAeC,UADS,GAExB,GAFwB,GAGxBN,GAAG,CAACK,UAAJ,CAAeE,SAHS,GAIxBhB,MAAM,CAACiB,GAAP,CAAW,uBAAX,EAAoC,WAApC,CAJuB,CAAP,CAIkCC,OAJtD;;AAMA,WAASE,MAAT,CAAgBC,KAAhB,EAAuB;AACrB,WACE,6BAAC,4BAAD;AAAc,MAAA,QAAQ,EAAEX,GAAG,CAACY,GAA5B;AAAiC,MAAA,OAAO,EAAEX,OAA1C;AAAmD,MAAA,KAAK,EAAEU;AAA1D,OACGA,KAAK,CAACE,QADT,CADF;AAKD;;AAED,QAAMC,YAAY,GAAG;AACnBZ,IAAAA,GADmB;AAEnBQ,IAAAA,MAFmB;AAGnBD,IAAAA;AAHmB,GAArB;;AAMA,QAAMM,gBAAgB,GAAG3B,OAAO,CAAC,WAAD,CAAP,CAAqBoB,OAA9C;;AACA,QAAO;AAAEQ,IAAAA,SAAF;AAAaC,IAAAA,cAAb;AAA6BC,IAAAA;AAA7B,MAAwCH,gBAAgB,CAACD,YAAD,CAA/D;AAEAf,EAAAA,GAAG,CAACoB,IAAJ,CAAS,oBAAoBC,gBAAeC,oBAAf,CAC3B,6BAAC,MAAD;AACE,IAAA,cAAc,EAAEJ,cADlB;AAEE,IAAA,MAAM,EAAElB,GAAG,CAACuB,MAFd;AAGE,IAAA,aAAa,EAAE3B,OAAO,CAACC,MAAR,CAAeC,YAHhC;AAIE,IAAA,WAAW,EAAEF,OAAO,CAACC,MAAR,CAAeE,WAJ9B;AAKE,IAAA,WAAW,EAAEoB,KAAK,CAACK,QAAN;AALf,KAME,6BAAC,SAAD,OANF,CAD2B,CAA7B;AAUD,CA9CD","sourcesContent":["\nimport React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport { StaticRouter } from 'react-router-dom';\n\nconst path = require('path');\nconst paths = require('paths');\nconst config = require('boring-config');\nconst Layout = require('./Layout');\n\n\nmodule.exports = function renderRedux(options = { layout: { clientConfig: {}, headScripts: []}}) {\n\n  const res = this;\n  const req = res.req;\n\n  const context = {};\n\n  const App = require(paths.app_dir\n    + res.reactPaths.clientRoot\n    + '/'\n    + res.reactPaths.reactRoot\n    + config.get('boring.react.mainApp', '/App.js')).default\n\n  const rootReducer = require(paths.app_dir\n    + res.reactPaths.clientRoot\n    + '/'\n    + res.reactPaths.reactRoot\n    + config.get('boring.react.reducers', '/reducers')).default;\n\n  function Router(props) {\n    return (\n      <StaticRouter location={req.url} context={context} props={props}>\n        {props.children}\n      </StaticRouter>\n    )\n  }\n\n  const dependencies = {\n    App,\n    Router,\n    rootReducer\n  }\n\n  const getAppComponents = require('./AppInit').default;\n  const  { Container, getStyleSheets, store }  = getAppComponents(dependencies);\n\n  res.send('<!DOCTYPE html>' + ReactDOMServer.renderToStaticMarkup(\n    <Layout\n      getStyleSheets={getStyleSheets}\n      locals={res.locals}\n      client_config={options.layout.clientConfig}\n      headScripts={options.layout.headScripts}\n      redux_state={store.getState()}>\n      <Container />\n    </Layout>\n  ))\n}"],"file":"renderRedux.js"}