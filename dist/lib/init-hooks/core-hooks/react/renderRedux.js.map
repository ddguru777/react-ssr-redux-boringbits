{"version":3,"sources":["../../../../../src/lib/init-hooks/core-hooks/react/renderRedux.js"],"names":["module","exports","renderRedux","options","layout","clientConfig","pageInjections","res","req","context","reactPaths","App","require","mainApp","default","reducers","Router","props","url","children","Container","getStyleSheets","store","send","ReactDOMServer","renderToStaticMarkup","locals","getState"],"mappings":";;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,SAASC,WAAT,CAAqBC,OAAO,GAAG;AAAEC,EAAAA,MAAM,EAAE;AAAEC,IAAAA,YAAY,EAAE,EAAhB;AAAoBC,IAAAA,cAAc,EAAE;AAApC;AAAV,CAA/B,EAAmF;AAElG,QAAMC,GAAG,GAAG,IAAZ;AACA,QAAMC,GAAG,GAAGD,GAAG,CAACC,GAAhB;AAEA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAM;AAACC,IAAAA;AAAD,MAAeH,GAArB;;AAEA,QAAMI,GAAG,GAAGC,OAAO,CAACF,UAAU,CAACG,OAAZ,CAAP,CAA4BC,OAAxC;;AACA,QAAMC,QAAQ,GAAGH,OAAO,CAACF,UAAU,CAACK,QAAZ,CAAP,CAA6BD,OAA9C;;AAEA,WAASE,MAAT,CAAgBC,KAAhB,EAAuB;AACrB,WACE,6BAAC,4BAAD;AAAc,MAAA,QAAQ,EAAET,GAAG,CAACU,GAA5B;AAAiC,MAAA,OAAO,EAAET,OAA1C;AAAmD,MAAA,KAAK,EAAEQ;AAA1D,OACGA,KAAK,CAACE,QADT,CADF;AAKD;;AAED,QAAM;AAACC,IAAAA,SAAD;AAAYC,IAAAA,cAAZ;AAA4BC,IAAAA;AAA5B,MAAqC,sBAAiB;AAC1DX,IAAAA,GAD0D;AAE1DK,IAAAA,MAF0D;AAG1DD,IAAAA;AAH0D,GAAjB,CAA3C;AAMA,QAAMX,MAAM,GAAGD,OAAO,CAACC,MAAR,IAAkB;AAC/BC,IAAAA,YAAY,EAAE,EADiB;AAE/BC,IAAAA,cAAc,EAAE;AAFe,GAAjC;AAKAC,EAAAA,GAAG,CAACgB,IAAJ,CAAS,oBAAoBC,gBAAeC,oBAAf,CACzB,6BAAC,eAAD;AACE,IAAA,cAAc,EAAEJ,cADlB;AAEE,IAAA,MAAM,EAAEd,GAAG,CAACmB,MAFd;AAGE,IAAA,aAAa,EAAEtB,MAAM,CAACC,YAHxB;AAIE,IAAA,cAAc,EAAED,MAAM,CAACE,cAJzB;AAKE,IAAA,WAAW,EAAEgB,KAAK,CAACK,QAAN;AALf,KAME,6BAAC,SAAD,OANF,CADyB,CAA7B;AAUD,CAxCD","sourcesContent":["\nimport React from 'react';\nimport ReactDOMServer from 'react-dom/server';\nimport {StaticRouter} from 'react-router-dom';\nimport Layout from './Layout';\nimport getAppComponents from './AppInit';\n\nmodule.exports = function renderRedux(options = { layout: { clientConfig: {}, pageInjections: {}}}) {\n\n  const res = this;\n  const req = res.req;\n\n  const context = {};\n  const {reactPaths} = res;\n\n  const App = require(reactPaths.mainApp).default;\n  const reducers = require(reactPaths.reducers).default;\n\n  function Router(props) {\n    return (\n      <StaticRouter location={req.url} context={context} props={props}>\n        {props.children}\n      </StaticRouter>\n    );\n  }\n\n  const {Container, getStyleSheets, store} = getAppComponents({\n    App,\n    Router,\n    reducers,\n  });\n\n  const layout = options.layout || {\n    clientConfig: {},\n    pageInjections: {}\n  };\n\n  res.send('<!DOCTYPE html>' + ReactDOMServer.renderToStaticMarkup(\n      <Layout\n        getStyleSheets={getStyleSheets}\n        locals={res.locals}\n        client_config={layout.clientConfig}\n        pageInjections={layout.pageInjections}\n        redux_state={store.getState()}>\n        <Container />\n      </Layout>\n  ))\n}"],"file":"renderRedux.js"}