{"version":3,"sources":["../../../../../src/lib/init-hooks/core-hooks/react/Layout.js"],"names":["module","exports","HTML","React","Component","render","reduxHtml","JSON","stringify","props","redux_state","replace","app_vars","Date","getTime","client_config","locals","loggedIn","pageInjections","Object","assign","headLinks","headScripts","bodyEndScripts","concat","app","ReactDOMServer","renderToString","children","height","__html","map","scriptObj","src","linkObj","padding","margin","getStyleSheets","width"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOMServer from 'react-dom/server';\n\n\nmodule.exports = class HTML extends React.Component {\n  render() {\n    const reduxHtml = `window.__PRELOADED_STATE__=${  JSON.stringify(this.props.redux_state).replace(/</g, '\\\\u003c')}`;\n\n    const app_vars = `\n      window.app_vars = {\n        server_load_time: ${(new Date().getTime())},\n        client_load_start : (new Date()).getTime(),\n        config: ${JSON.stringify(this.props.client_config || {})},\n        loggedIn: ${this.props.locals.loggedIn}\n      }\n    `;\n\n    const pageInjections = Object.assign({\n      headLinks: [],\n      headScripts: [],\n      bodyEndScripts: []\n    }, this.props.pageInjections);\n\n    pageInjections.headLinks = pageInjections.headLinks.concat(this.props.locals.pageInjections.headLinks || []);\n    pageInjections.headScripts = pageInjections.headScripts.concat(this.props.locals.pageInjections.headScripts || []);\n    pageInjections.bodyEndScripts = pageInjections.bodyEndScripts.concat(this.props.locals.pageInjections.bodyEndScripts || []);\n\n    const app = ReactDOMServer.renderToString(this.props.children);\n\n    return (\n      <html style={{ height: '100%' }}>\n        <head>\n          <meta charSet=\"utf-8\" />\n          <script dangerouslySetInnerHTML={{ __html: app_vars }}></script>\n          <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500\" />\n          <link rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" />\n          <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\"></meta>\n\n          {\n            pageInjections.headScripts.map((scriptObj) => <script key={scriptObj.src} {...scriptObj} />)\n          }\n\n          {\n            pageInjections.headLinks.map((linkObj) => <link key={linkObj.src} {...linkObj} />)\n          }\n        </head>\n        <body style={{ height: '100%', padding: '0px', margin: '0px' }}>\n          <style dangerouslySetInnerHTML={{ __html: this.props.getStyleSheets() }} id=\"jss-server-side\"></style>\n          <div style={{ width: '100%', height: '100%' }} id=\"root\" dangerouslySetInnerHTML={{ __html: app }}>\n\n          </div>\n\n          {\n            pageInjections.bodyEndScripts.map((scriptObj) => <script key={scriptObj.src} {...scriptObj} />)\n          }\n          <script dangerouslySetInnerHTML={{ __html: reduxHtml }}></script>\n        </body>\n      </html>\n    );\n  }\n};\n"],"file":"Layout.js"}