{"version":3,"sources":["../../../../../src/lib/init-hooks/core-hooks/webpack-dev/index.js"],"names":["compose","require","staticInjectionMiddleware","createWebpackStack","module","exports","BoringInjections","boring","before","app","use","Promise","resolve","ctx","get","entrypoint","res","name"],"mappings":";;AAAA,MAAMA,OAAO,GAAGC,OAAO,CAAC,oBAAD,CAAP,CAA8BD,OAA9C;;AACA,MAAME,yBAAyB,GAAGD,OAAO,CAAC,6BAAD,CAAzC;;AACA,MAAME,kBAAkB,GAAGF,OAAO,CAAC,sBAAD,CAAlC;;AAEAG,MAAM,CAACC,OAAP,GAAiB,UAASC,gBAAT,EAA2B;AAE1C,QAAM;AACJC,IAAAA;AADI,MAEFD,gBAFJ;AAIAC,EAAAA,MAAM,CAACC,MAAP,CAAc,cAAd,EAA8B,YAAW;AAEvCD,IAAAA,MAAM,CAACE,GAAP,CAAWC,GAAX,CAAeP,kBAAkB,CAACG,gBAAD,CAAjC,EAFuC,CAIvC;AACA;;AACA,WAAOK,OAAO,CAACC,OAAR,EAAP;AACD,GAPD;AASAL,EAAAA,MAAM,CAACC,MAAP,CAAc,WAAd,EAA2B,UAASK,GAAT,EAAc;AACvC,QAAIA,GAAG,CAACC,GAAJ,CAAQC,UAAZ,EAAwB;AACtBb,MAAAA,yBAAyB,CAACW,GAAG,CAACG,GAAL,EAAUH,GAAG,CAACC,GAAJ,CAAQC,UAAlB,CAAzB;AACD;;AAED,WAAOJ,OAAO,CAACC,OAAR,EAAP;AACD,GAND;AASA,SAAO;AAACK,IAAAA,IAAI,EAAE;AAAP,GAAP;AACD,CAzBD","sourcesContent":["const compose = require('compose-middleware').compose\r\nconst staticInjectionMiddleware = require('./staticInjectionMiddleware');\r\nconst createWebpackStack = require('./createWebpackStack');\r\n\r\nmodule.exports = function(BoringInjections) {\r\n  \r\n  const {\r\n    boring\r\n  } = BoringInjections;\r\n\r\n  boring.before('init-routers', function() {\r\n\r\n    boring.app.use(createWebpackStack(BoringInjections));\r\n\r\n    // let everything else keep booting up, we will\r\n    // queue until webpackStack resolves \r\n    return Promise.resolve();\r\n  });\r\n\r\n  boring.before('http::get', function(ctx) {\r\n    if (ctx.get.entrypoint) {\r\n      staticInjectionMiddleware(ctx.res, ctx.get.entrypoint);\r\n    }\r\n\r\n    return Promise.resolve();\r\n  });\r\n  \r\n\r\n  return {name: 'boring-webpack'}\r\n}"],"file":"index.js"}