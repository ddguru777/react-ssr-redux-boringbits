{"version":3,"sources":["../../../../../src/lib/init-hooks/core-hooks/webpack-dev/index.js"],"names":["staticInjectionMiddleware","require","createWebpackStack","module","exports","webpackHook","BoringInjections","boring","before","beforeInitRouters","app","use","Promise","resolve","ctx","get","entrypoint","res","name"],"mappings":";;AAAA,MAAMA,yBAAyB,GAAGC,OAAO,CAAC,6BAAD,CAAzC;;AACA,MAAMC,kBAAkB,GAAGD,OAAO,CAAC,sBAAD,CAAlC;;AAEAE,MAAM,CAACC,OAAP,GAAiB,SAASC,WAAT,CAAqBC,gBAArB,EAAuC;AACtD,QAAM;AAACC,IAAAA;AAAD,MAAWD,gBAAjB;AAEAC,EAAAA,MAAM,CAACC,MAAP,CAAc,cAAd,EAA8B,SAASC,iBAAT,GAA6B;AACzDF,IAAAA,MAAM,CAACG,GAAP,CAAWC,GAAX,CAAeT,kBAAkB,CAACI,gBAAD,CAAjC,EADyD,CAGzD;AACA;;AACA,WAAOM,OAAO,CAACC,OAAR,EAAP;AACD,GAND;AAQAN,EAAAA,MAAM,CAACC,MAAP,CAAc,WAAd,EAA2B,UAASM,GAAT,EAAc;AACvC,QAAIA,GAAG,CAACC,GAAJ,CAAQC,UAAZ,EAAwB;AACtBhB,MAAAA,yBAAyB,CAACc,GAAG,CAACG,GAAL,EAAUH,GAAG,CAACC,GAAJ,CAAQC,UAAlB,CAAzB;AACD;;AAED,WAAOJ,OAAO,CAACC,OAAR,EAAP;AACD,GAND;AAQA,SAAO;AAACK,IAAAA,IAAI,EAAE;AAAP,GAAP;AACD,CApBD","sourcesContent":["const staticInjectionMiddleware = require('./staticInjectionMiddleware');\nconst createWebpackStack = require('./createWebpackStack');\n\nmodule.exports = function webpackHook(BoringInjections) {\n  const {boring} = BoringInjections;\n\n  boring.before('init-routers', function beforeInitRouters() {\n    boring.app.use(createWebpackStack(BoringInjections));\n\n    // let everything else keep booting up, we will\n    // queue until webpackStack resolves\n    return Promise.resolve();\n  });\n\n  boring.before('http::get', function(ctx) {\n    if (ctx.get.entrypoint) {\n      staticInjectionMiddleware(ctx.res, ctx.get.entrypoint);\n    }\n\n    return Promise.resolve();\n  });\n\n  return {name: 'boring-webpack'};\n};\n"],"file":"index.js"}