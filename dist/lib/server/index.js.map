{"version":3,"sources":["../../../src/lib/server/index.js"],"names":["config","require","logger","paths","util","InitPipeline","startExpress","app","port","listen","promisify","BoringServer","constructor","start","options","injections","build","Object","assign","webpack_config","boring_webpack_dev_config","get","perform","info","module","exports"],"mappings":";;;;;;AAAA,MAAMA,MAAM,GAAGC,OAAO,CAAC,eAAD,CAAtB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,eAAD,CAAtB;;AACA,MAAME,KAAK,GAAGF,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMG,IAAI,GAAGH,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMI,YAAY,GAAGJ,OAAO,CAAC,kBAAD,CAA5B;;SAEeK,Y;;;;;oCAAf,WAA4BC,GAA5B,EAAiCC,IAAjC,EAAuC;AACrCD,IAAAA,GAAG,CAACE,MAAJ,GAAaL,IAAI,CAACM,SAAL,CAAeH,GAAG,CAACE,MAAnB,CAAb;AACA,WAAOF,GAAG,CAACE,MAAJ,CAAWD,IAAX,CAAP;AACD,G;;;;AAED,MAAMG,YAAN,SAA2BN,YAA3B,CAAwC;AACtCO,EAAAA,WAAW,GAAG;AACZ;AACD;;AAEKC,EAAAA,KAAN,CAAYC,OAAZ,EAAqB;AAAA;;AAAA;AAEnB,YAAMC,UAAU,SAAS,KAAI,CAACC,KAAL,CAAWC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB;AACpDC,QAAAA,cAAc,EAAElB,OAAO,CAACE,KAAK,CAACiB,yBAAP;AAD6B,OAAlB,EAEjCN,OAFiC,CAAX,CAAzB;AAIA,YAAMN,IAAI,GAAGR,MAAM,CAACqB,GAAP,CAAW,iBAAX,CAAb;AACAN,MAAAA,UAAU,CAACP,IAAX,GAAkBA,IAAlB;AAEA,mBAAa,KAAI,CAACc,OAAL,CAAa,QAAb,EAAuBP,UAAvB;AAAA;AAAA,wBAAmC,aAAW;AACzD,cAAMT,YAAY,CAAC,KAAI,CAACC,GAAN,EAAWC,IAAX,CAAlB;AACAN,QAAAA,MAAM,CAACqB,IAAP,CAAY,uBAAuBf,IAAnC;AAEA,eAAOO,UAAP;AACD,OALY,EAAb;AATmB;AAgBpB;;AArBqC;;AAwBxCS,MAAM,CAACC,OAAP,GAAiBd,YAAjB","sourcesContent":["const config = require('boring-config');\r\nconst logger = require('boring-logger');\r\nconst paths = require('paths');\r\nconst util = require('util');\r\nconst InitPipeline = require('../init-pipeline');\r\n\r\nasync function startExpress(app, port) {\r\n  app.listen = util.promisify(app.listen);\r\n  return app.listen(port);\r\n}\r\n\r\nclass BoringServer extends InitPipeline {\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  async start(options) {\r\n\r\n    const injections = await this.build(Object.assign({}, {\r\n      webpack_config: require(paths.boring_webpack_dev_config)\r\n    }, options));\r\n\r\n    const port = config.get('boring.app.port');\r\n    injections.port = port;\r\n    \r\n    return await this.perform('listen', injections, async() => {\r\n      await startExpress(this.app, port);\r\n      logger.info('Listening on port ' + port);\r\n  \r\n      return injections;\r\n    })\r\n   \r\n  }\r\n}\r\n\r\nmodule.exports = BoringServer"],"file":"index.js"}