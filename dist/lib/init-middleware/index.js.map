{"version":3,"sources":["../../../src/lib/init-middleware/index.js"],"names":["module","exports","BoringInjections","boring","moduleData","paths","boring_middleware","server_middleware","Object","keys","reduce","prev","key","middlewareExport","func","name","middleware","run","initMiddleware"],"mappings":";;AACA;;AACA;;;;;;;;AAEAA,MAAM,CAACC,OAAP;AAAA;AAAA;AAAA,0CAAiB,WAA8BC,gBAA9B,EAAgD;AAE/D,UAAM;AACJC,MAAAA;AADI,QAEFD,gBAFJ;AAIA,UAAME,UAAU,SAAS,+BAAc,CAACC,eAAMC,iBAAP,EAA0BD,eAAME,iBAAhC,CAAd,EAAkEJ,MAAlE,CAAzB;AAEA,WAAOK,MAAM,CAACC,IAAP,CAAYL,UAAZ,EAAwBM,MAAxB,CAA+B,UAASC,IAAT,EAAeC,GAAf,EAAoB;AACxD,YAAMC,gBAAgB,GAAGT,UAAU,CAACQ,GAAD,CAAnC;AACA,UAAIE,IAAI,GAAGD,gBAAX;AACA,UAAIE,IAAI,GAAGH,GAAX;;AAEA,UAAI,OAAOC,gBAAP,IAA2B,UAA/B,EAA2C;AACzCE,QAAAA,IAAI,GAAGF,gBAAgB,CAACE,IAAxB;AACAD,QAAAA,IAAI,GAAGD,gBAAgB,CAACG,UAAjB,IAA+BH,gBAAgB,CAACC,IAAhD,IAAwDD,gBAAgB,CAACI,GAAhF;AACD;;AAEDN,MAAAA,IAAI,CAACI,IAAD,CAAJ,GAAaD,IAAb,CAVwD,CAW5D;;AACI,aAAOH,IAAP;AACD,KAbM,EAaJ,EAbI,CAAP;AAeD,GAvBD;;AAAA,kBAAgCO,cAAhC;AAAA;AAAA;AAAA","sourcesContent":["\r\nimport paths from 'paths'\r\nimport requireInject from 'require-inject-all'\r\n\r\nmodule.exports = async function initMiddleware(BoringInjections) {\r\n\r\n  const {\r\n    boring\r\n  } = BoringInjections;\r\n  \r\n  const moduleData = await requireInject([paths.boring_middleware, paths.server_middleware], boring)\r\n\r\n  return Object.keys(moduleData).reduce(function(prev, key) {\r\n    const middlewareExport = moduleData[key];\r\n    let func = middlewareExport;\r\n    let name = key;\r\n\r\n    if (typeof middlewareExport != 'function') {\r\n      name = middlewareExport.name;\r\n      func = middlewareExport.middleware || middlewareExport.func || middlewareExport.run;\r\n    }\r\n\r\n    prev[name] = func;\r\n//    boring.add_middleware(name, func);\r\n    return prev;\r\n  }, {});\r\n\r\n}"],"file":"index.js"}