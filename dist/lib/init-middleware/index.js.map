{"version":3,"sources":["../../../src/lib/init-middleware/index.js"],"names":["module","exports","BoringInjections","boring","moduleData","paths","boring_middleware","server_middleware","Object","keys","reduce","prev","key","middlewareExport","func","name","middleware","run","initMiddleware"],"mappings":";;AACA;;AACA;;;;;;;;AAEAA,MAAM,CAACC,OAAP;AAAA;AAAA;AAAA,0CAAiB,WAA8BC,gBAA9B,EAAgD;AAE/D,UAAM;AACJC,MAAAA;AADI,QAEFD,gBAFJ;AAIA,UAAME,UAAU,SAAS,+BAAc,CAACC,eAAMC,iBAAP,EAA0BD,eAAME,iBAAhC,CAAd,EAAkEJ,MAAlE,CAAzB;AAEA,WAAOK,MAAM,CAACC,IAAP,CAAYL,UAAZ,EAAwBM,MAAxB,CAA+B,UAASC,IAAT,EAAeC,GAAf,EAAoB;AACxD,YAAMC,gBAAgB,GAAGT,UAAU,CAACQ,GAAD,CAAnC;AACA,UAAIE,IAAI,GAAGD,gBAAX;AACA,UAAIE,IAAI,GAAGH,GAAX;;AAEA,UAAI,OAAOC,gBAAP,IAA2B,UAA/B,EAA2C;AACzCE,QAAAA,IAAI,GAAGF,gBAAgB,CAACE,IAAxB;AACAD,QAAAA,IAAI,GAAGD,gBAAgB,CAACG,UAAjB,IAA+BH,gBAAgB,CAACC,IAAhD,IAAwDD,gBAAgB,CAACI,GAAhF;AACD;;AAEDN,MAAAA,IAAI,CAACI,IAAD,CAAJ,GAAaD,IAAb,CAVwD,CAW5D;;AACI,aAAOH,IAAP;AACD,KAbM,EAaJ,EAbI,CAAP;AAeD,GAvBD;;AAAA,kBAAgCO,cAAhC;AAAA;AAAA;AAAA","sourcesContent":["\nimport paths from 'paths'\nimport requireInject from 'require-inject-all'\n\nmodule.exports = async function initMiddleware(BoringInjections) {\n\n  const {\n    boring\n  } = BoringInjections;\n  \n  const moduleData = await requireInject([paths.boring_middleware, paths.server_middleware], boring)\n\n  return Object.keys(moduleData).reduce(function(prev, key) {\n    const middlewareExport = moduleData[key];\n    let func = middlewareExport;\n    let name = key;\n\n    if (typeof middlewareExport != 'function') {\n      name = middlewareExport.name;\n      func = middlewareExport.middleware || middlewareExport.func || middlewareExport.run;\n    }\n\n    prev[name] = func;\n//    boring.add_middleware(name, func);\n    return prev;\n  }, {});\n\n}"],"file":"index.js"}