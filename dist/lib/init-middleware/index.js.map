{"version":3,"sources":["../../../src/lib/init-middleware/index.js"],"names":["module","exports","initMiddleware","BoringInjections","boring","moduleData","paths","boring_middleware","server_middleware","Object","keys","reduce","prev","key","middlewareExport","func","name","middleware","run"],"mappings":";;AACA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,eAAeC,cAAf,CAA8BC,gBAA9B,EAAgD;AAE/D,QAAM;AACJC,IAAAA;AADI,MAEFD,gBAFJ;AAIA,QAAME,UAAU,GAAG,MAAM,+BAAc,CAACC,eAAMC,iBAAP,EAA0BD,eAAME,iBAAhC,CAAd,EAAkEJ,MAAlE,CAAzB;AAEA,SAAOK,MAAM,CAACC,IAAP,CAAYL,UAAZ,EAAwBM,MAAxB,CAA+B,UAASC,IAAT,EAAeC,GAAf,EAAoB;AACxD,UAAMC,gBAAgB,GAAGT,UAAU,CAACQ,GAAD,CAAnC;AACA,QAAIE,IAAI,GAAGD,gBAAX;AACA,QAAIE,IAAI,GAAGH,GAAX;;AAEA,QAAI,OAAOC,gBAAP,IAA2B,UAA/B,EAA2C;AACzCE,MAAAA,IAAI,GAAGF,gBAAgB,CAACE,IAAxB;AACAD,MAAAA,IAAI,GAAGD,gBAAgB,CAACG,UAAjB,IAA+BH,gBAAgB,CAACC,IAAhD,IAAwDD,gBAAgB,CAACI,GAAhF;AACD;;AAEDN,IAAAA,IAAI,CAACI,IAAD,CAAJ,GAAaD,IAAb,CAVwD,CAW5D;;AACI,WAAOH,IAAP;AACD,GAbM,EAaJ,EAbI,CAAP;AAeD,CAvBD","sourcesContent":["\r\nimport paths from 'paths'\r\nimport requireInject from 'require-inject-all'\r\n\r\nmodule.exports = async function initMiddleware(BoringInjections) {\r\n\r\n  const {\r\n    boring\r\n  } = BoringInjections;\r\n  \r\n  const moduleData = await requireInject([paths.boring_middleware, paths.server_middleware], boring)\r\n\r\n  return Object.keys(moduleData).reduce(function(prev, key) {\r\n    const middlewareExport = moduleData[key];\r\n    let func = middlewareExport;\r\n    let name = key;\r\n\r\n    if (typeof middlewareExport != 'function') {\r\n      name = middlewareExport.name;\r\n      func = middlewareExport.middleware || middlewareExport.func || middlewareExport.run;\r\n    }\r\n\r\n    prev[name] = func;\r\n//    boring.add_middleware(name, func);\r\n    return prev;\r\n  }, {});\r\n\r\n}"],"file":"index.js"}