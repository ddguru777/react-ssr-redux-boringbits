{"version":3,"sources":["../../../src/lib/init-middleware/index.js"],"names":["module","exports","initMiddleware","BoringInjections","boring","moduleData","paths","boring_middleware","server_middleware","Object","keys","reduce","prev","key","middlewareExport","func","name","middleware","run"],"mappings":";;AACA;;AACA;;;;AAEAA,MAAM,CAACC,OAAP,GAAiB,eAAeC,cAAf,CAA8BC,gBAA9B,EAAgD;AAE/D,QAAM;AACJC,IAAAA;AADI,MAEFD,gBAFJ;AAIA,QAAME,UAAU,GAAG,MAAM,+BAAc,CAACC,eAAMC,iBAAP,EAA0BD,eAAME,iBAAhC,CAAd,EAAkEJ,MAAlE,CAAzB;AAEA,SAAOK,MAAM,CAACC,IAAP,CAAYL,UAAZ,EAAwBM,MAAxB,CAA+B,UAASC,IAAT,EAAeC,GAAf,EAAoB;AACxD,UAAMC,gBAAgB,GAAGT,UAAU,CAACQ,GAAD,CAAnC;AACA,QAAIE,IAAI,GAAGD,gBAAX;AACA,QAAIE,IAAI,GAAGH,GAAX;;AAEA,QAAI,OAAOC,gBAAP,IAA2B,UAA/B,EAA2C;AACzCE,MAAAA,IAAI,GAAGF,gBAAgB,CAACE,IAAxB;AACAD,MAAAA,IAAI,GAAGD,gBAAgB,CAACG,UAAjB,IAA+BH,gBAAgB,CAACC,IAAhD,IAAwDD,gBAAgB,CAACI,GAAhF;AACD;;AAEDN,IAAAA,IAAI,CAACI,IAAD,CAAJ,GAAaD,IAAb,CAVwD,CAW5D;;AACI,WAAOH,IAAP;AACD,GAbM,EAaJ,EAbI,CAAP;AAeD,CAvBD","sourcesContent":["\nimport paths from 'paths'\nimport requireInject from 'require-inject-all'\n\nmodule.exports = async function initMiddleware(BoringInjections) {\n\n  const {\n    boring\n  } = BoringInjections;\n  \n  const moduleData = await requireInject([paths.boring_middleware, paths.server_middleware], boring)\n\n  return Object.keys(moduleData).reduce(function(prev, key) {\n    const middlewareExport = moduleData[key];\n    let func = middlewareExport;\n    let name = key;\n\n    if (typeof middlewareExport != 'function') {\n      name = middlewareExport.name;\n      func = middlewareExport.middleware || middlewareExport.func || middlewareExport.run;\n    }\n\n    prev[name] = func;\n//    boring.add_middleware(name, func);\n    return prev;\n  }, {});\n\n}"],"file":"index.js"}